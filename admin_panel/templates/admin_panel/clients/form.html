{% extends 'admin_panel/base.html' %}

{% block page_title %}Editar Cliente{% endblock %}

{% block content %}
<div class="admin-form-container">
    <h2>Editar Cliente: {{ client.company_name }}</h2>

    <form method="post">
        {% csrf_token %}

        <div class="form-group">
            <label class="form-label">Usuario</label>
            <input type="text" class="form-input" value="{{ client.user.username }}" disabled>
        </div>

        <div class="form-group">
            <label for="company_name" class="form-label">Empresa / Razón Social</label>
            <input type="text" name="company_name" id="company_name" class="form-input"
                value="{{ client.company_name }}">
        </div>

        <div class="form-group">
            <label for="cuit_dni" class="form-label">CUIT / DNI</label>
            <input type="text" name="cuit_dni" id="cuit_dni" class="form-input" value="{{ client.cuit_dni }}">
        </div>

        <div class="form-group">
            <label for="discount" class="form-label">Descuento (%)</label>
            <input type="number" step="0.01" name="discount" id="discount" class="form-input"
                value="{{ client.discount }}">
            <small class="text-muted">Ejemplo: 10 para 10% de descuento</small>
        </div>

        <div class="form-group">
            <label for="province" class="form-label">Provincia</label>
            <input type="text" name="province" id="province" class="form-input" value="{{ client.province }}">
        </div>

        <div class="form-group">
            <label for="address" class="form-label">Domicilio</label>
            <textarea name="address" id="address" class="form-textarea">{{ client.address }}</textarea>
        </div>

        <div class="form-group">
            <label for="phone" class="form-label">Teléfonos</label>
            <input type="text" name="phone" id="phone" class="form-input" value="{{ client.phone }}">
        </div>

        <div class="form-group">
            <label for="client_type" class="form-label">Tipo de Cliente</label>
            <select name="client_type" id="client_type" class="form-select">
                <option value="">-</option>
                <option value="taller" {% if client.client_type == 'taller' %}selected{% endif %}>Taller</option>
                <option value="distribuidora" {% if client.client_type == 'distribuidora' %}selected{% endif %}>Distribuidora</option>
                <option value="flota" {% if client.client_type == 'flota' %}selected{% endif %}>Flota</option>
                <option value="otro" {% if client.client_type == 'otro' %}selected{% endif %}>Otro</option>
            </select>
        </div>

        <div class="form-group">
            <label for="iva_condition" class="form-label">Condición IVA</label>
            <select name="iva_condition" id="iva_condition" class="form-select">
                <option value="">-</option>
                <option value="responsable_inscripto" {% if client.iva_condition == 'responsable_inscripto' %}selected{% endif %}>Responsable Inscripto</option>
                <option value="monotributista" {% if client.iva_condition == 'monotributista' %}selected{% endif %}>Monotributista</option>
                <option value="exento" {% if client.iva_condition == 'exento' %}selected{% endif %}>Exento</option>
                <option value="consumidor_final" {% if client.iva_condition == 'consumidor_final' %}selected{% endif %}>Consumidor Final</option>
            </select>
        </div>

        <div class="form-actions">
            <button type="submit" class="btn btn-primary">Guardar</button>
            <a href="{% url 'admin_client_list' %}" class="btn btn-outline">Cancelar</a>
        </div>
    </form>
</div>
{% endblock %}
