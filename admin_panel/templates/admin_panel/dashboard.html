{% extends 'admin_panel/base.html' %}

{% block page_title %}Dashboard{% endblock %}

{% block content %}
<div class="dashboard-grid">
    <div class="stat-card">
        <h3>Productos Activos</h3>
        <span class="number">{{ active_product_count }}</span>
    </div>
    <div class="stat-card">
        <h3>Total Productos</h3>
        <span class="number">{{ product_count }}</span>
    </div>
    <div class="stat-card">
        <h3>Clientes</h3>
        <span class="number">{{ client_count }}</span>
    </div>
    <div class="stat-card">
        <h3>Pedidos Pendientes</h3>
        <span class="number">{{ pending_orders }}</span>
    </div>
</div>

<div class="dashboard-sections">
    <div class="dashboard-section">
        <h2>Solicitudes Pendientes ({{ pending_requests }})</h2>
        {% if recent_requests %}
        <ul class="quick-list">
            {% for req in recent_requests %}
            <li>
                <span>
                    <strong>{{ req.company_name }}</strong><br>
                    <small>{{ req.email }}</small>
                </span>
                <a href="{% url 'admin_request_approve' req.pk %}" class="btn btn-primary">
                    Revisar
                </a>
            </li>
            {% endfor %}
        </ul>
        <a href="{% url 'admin_request_list' %}" class="btn btn-outline mt-2">Ver todas</a>
        {% else %}
        <p class="text-muted">No hay solicitudes pendientes</p>
        {% endif %}
    </div>

    <div class="dashboard-section">
        <h2>Últimos Pedidos</h2>
        {% if recent_orders %}
        <ul class="quick-list">
            {% for order in recent_orders %}
            <li>
                <span>
                    <strong>Pedido #{{ order.pk }}</strong><br>
                    <small>{{ order.user.username }} - ${{ order.total }}</small>
                </span>
                <span
                    class="badge badge-{% if order.status == 'pending' %}warning{% elif order.status == 'confirmed' %}info{% else %}success{% endif %}">
                    {{ order.get_status_display }}
                </span>
            </li>
            {% endfor %}
        </ul>
        <a href="{% url 'admin_order_list' %}" class="btn btn-outline mt-2">Ver todos</a>
        {% else %}
        <p class="text-muted">No hay pedidos recientes</p>
        {% endif %}
    </div>
</div>

<div class="dashboard-section mt-4" style="max-width: 100%;">
    <h2>Acciones Rápidas</h2>
    <div class="flex gap-3" style="flex-wrap: wrap;">
        <a href="{% url 'admin_product_create' %}" class="btn btn-primary">+ Nuevo Producto</a>
        <a href="{% url 'admin_category_create' %}" class="btn btn-outline">+ Nueva Categoría</a>
        <a href="{% url 'admin_settings' %}" class="btn btn-outline">⚙️ Configuración</a>
    </div>
</div>
{% endblock %}